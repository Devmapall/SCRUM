<html>
    <head>
        <script src="jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="jquery-ui/jquery-ui.js" type="text/javascript"></script>
        <script src="requests.js"></script>
        <link rel="stylesheet" href="jquery-ui/jquery-ui.css">
        <link rel="stylesheet" href="jquery-ui/jquery-ui.theme.css">
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript">
            $(function () {
                $("#loginDialog").dialog({autoOpen: false, modal: true, width: 300});
                $("#addTaskDialog").dialog({autoOpen: false, modal: true, width: 500});
                $("#addIssueDialog").dialog({autoOpen: false, modal: true, width: 500});
                $("#tabs").tabs();

                if (document.cookie == "") {
                    $("#loginDialog").dialog("open");
                }

                $.ajax({
                    url: "http://scrum.mykey.to:8080/auth/index.php",
                    type: "POST",
                    data: {},
                    dataType: 'json',
                    xhrFields: {
                        withCredentials: true
                    },
                    crossDomain: true,
                    success: function (data) {
                        if (data.valid == true) {
                            $("#showUsername").html("Logged in as: " + data.username);
                        }
                    }
                });


                $("#login").click(function () {
                    var user = $("#username").val();
                    var pass = $("#password").val();
                    $.ajax({
                        url: "http://scrum.mykey.to:8080/auth/index.php",
                        type: "POST",
                        data: {username: user, password: pass},
                        dataType: 'json',
                        xhrFields: {
                            withCredentials: true
                        },
                        crossDomain: true,
                        success: function (data) {
                            var response = data;
                            if (response.Result == true) {
                                $("#loginDialog").dialog("close");
                            }
                        }
                    });
                });
                
                $("#addTask").click(function(e) {
                   e.preventDefault();
                   addTask();
                });
            });
        </script>
    </head>
    <body>
        <div id="header">
            <span id="showUsername"></span>
            <button id="logout">Logout</button>
        </div>
        <div id="navigation">
            <ul>
                <li><a id="addIssue">Add Issue</a></li>
                <li><a id="addTask">Add Task</a></li>
                <li><a id="addProject">Add Project</a></li>
                <li><a id="showUsers">Show Users</a></li>
                <li><a id="addUser">Add User</a></li>
            </ul>
        </div>
        <div id="statistics">
            <div id="onlineUsers">

            </div>
            <div id="issueTracker">
                <span id="allIssuesCount"></span>
                <span id="openIssuesCount"></span>
                <span id="closedIssuesCount"></span>
                <span id="IssuesToday"></span>
                <span id="myIssuesCount"></span>
            </div>
            <div id="taskTracker">
                <span id="allTasksCount"></span>
                <span id="openTasksCount"></span>
                <span id="closedTasksCount"></span>
                <span id="TasksToday"></span>
                <span id="myTasksCount"></span>
            </div>
        </div>
        <div id="body">
            <div id="tabs">
                <ul>
                    <li><a href="#overview-tab">Overview</a></li>
                    <li><a href="#projects-tab">My Projects</a></li>
                    <li><a href="#opentasks-tab">Open Tasks</a></li>
                    <li><a href="#openissues-tab">Open Issues</a></li>
                    <li><a href="#mytasks-tab">My Tasks</a></li>
                    <li><a href="#myissues-tab">My Issues</a></li>
                    <li><a href="#closedTasks-tab">Closed Tasks</a></li>
                    <li><a href="#closedIssues-tab">Closed Issues</a></li>
                </ul>
                <div id="overview-tab">Overview</div>
                <div id="projects-tab"></div>
                <div id="opentasks-tab"></div>
                <div id="openissues-tab"></div>
                <div id="mytasks-tab"></div>
                <div id="myissues-tab"></div>
                <div id="closedTasks-tab"></div>
                <div id="closedIssues-tab"></div>
            </div>
        </div>
        <div id="loginDialog">
            <table border="0">
                <tr><td>Username:</td><td><input type="text" id="username"></td></tr>
                <tr><td>Password:</td><td><input type="password" id="password"></td></tr>
                <tr><td colspan="2"><button id="login">Login</button></td></tr>
            </table>
        </div>
        <div id="addTaskDialog">
            <table border="0">
                <tr><td>Title:</td><td><input type="text" id="taskTitle"></td></tr>
                <tr><td>Text:</td><td><textarea rows="5" cols="30" id="taskText"></textarea></td>
                <tr><td colspan="2"><button id="taskSubmit">Send</button></td>
            </table>
        </div>
        <div id="addIssueDialog">
            <table border="0">
                <tr><td>Title:</td><td><input type="text" id="taskTitle"></td></tr>
                <tr><td>Text:</td><td><textarea rows="5" cols="30" id="taskText"></textarea></td>
                <tr><td colspan="2"><button id="taskSubmit">Send</button></td>
            </table>
        </div>
    </body>
</html>
